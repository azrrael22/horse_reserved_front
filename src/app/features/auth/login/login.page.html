<ion-content class="auth-background" fullscreen>
  <div class="flex min-h-full flex-col items-center justify-center px-6 py-12">

    <!-- Logo / Brand -->
    <div class="mb-8 text-center">
      <div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-primary shadow-lg">
        <ion-icon name="logo-google" class="text-3xl text-white" style="display:none"></ion-icon>
        <span class="text-3xl">游냢</span>
      </div>
      <h1 class="text-2xl font-bold text-gray-800">Horse Reserved</h1>
      <p class="mt-1 text-sm text-gray-500">Inicia sesi칩n en tu cuenta</p>
    </div>

    <!-- Card -->
    <div class="w-full max-w-sm rounded-2xl bg-white p-6 shadow-xl">

      <!-- Error message -->
      @if (errorMessage()) {
        <div class="mb-4 rounded-lg bg-red-50 p-3">
          <ion-text color="danger">
            <p class="text-sm">{{ errorMessage() }}</p>
          </ion-text>
        </div>
      }

      <!-- Form -->
      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

        <!-- Email -->
        <div class="mb-4">
          <ion-item lines="full" class="rounded-lg" [class.ion-invalid]="emailCtrl.invalid && emailCtrl.touched">
            <ion-icon name="mail-outline" slot="start" color="medium"></ion-icon>
            <ion-label position="floating">Correo electr칩nico</ion-label>
            <ion-input
              type="email"
              formControlName="email"
              autocomplete="email"
              inputmode="email"
            ></ion-input>
          </ion-item>
          @if (emailCtrl.touched && emailCtrl.hasError('required')) {
            <p class="error-message">El correo es requerido.</p>
          }
          @if (emailCtrl.touched && emailCtrl.hasError('email')) {
            <p class="error-message">Ingresa un correo v치lido.</p>
          }
        </div>

        <!-- Password -->
        <div class="mb-6">
          <ion-item lines="full" class="rounded-lg" [class.ion-invalid]="passwordCtrl.invalid && passwordCtrl.touched">
            <ion-icon name="lock-closed-outline" slot="start" color="medium"></ion-icon>
            <ion-label position="floating">Contrase침a</ion-label>
            <ion-input
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              autocomplete="current-password"
            ></ion-input>
            <ion-button fill="clear" slot="end" (click)="togglePassword()" type="button" aria-label="Mostrar contrase침a">
              <ion-icon [name]="showPassword() ? 'eye-off-outline' : 'eye-outline'" color="medium"></ion-icon>
            </ion-button>
          </ion-item>
          @if (passwordCtrl.touched && passwordCtrl.hasError('required')) {
            <p class="error-message">La contrase침a es requerida.</p>
          }
        </div>

        <!-- Submit -->
        <ion-button
          expand="block"
          type="submit"
          [disabled]="form.invalid || loading()"
          class="mb-4"
        >
          @if (loading()) {
            <ion-spinner name="crescent" class="mr-2"></ion-spinner>
          }
          Iniciar Sesi칩n
        </ion-button>

      </form>

      <!-- Divider -->
      <div class="my-4 flex items-center gap-3">
        <div class="h-px flex-1 bg-gray-200"></div>
        <span class="text-xs text-gray-400">o contin칰a con</span>
        <div class="h-px flex-1 bg-gray-200"></div>
      </div>

      <!-- Google OAuth2 -->
      <ion-button
        expand="block"
        fill="outline"
        color="medium"
        (click)="loginWithGoogle()"
        class="mb-6"
      >
        <ion-icon name="logo-google" slot="start"></ion-icon>
        Continuar con Google
      </ion-button>

      <!-- Register link -->
      <p class="text-center text-sm text-gray-500">
        쯅o tienes cuenta?
        <a routerLink="/auth/register" class="font-semibold text-primary">
          Reg칤strate
        </a>
      </p>

    </div>
  </div>
</ion-content>
